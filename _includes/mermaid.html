<script type="module">
    import mermaid from "https://cdn.jsdelivr.net/npm/mermaid@11/dist/mermaid.esm.min.mjs";

  mermaid.initialize({
    startOnLoad: false,
    theme: "base",
    securityLevel: "loose",
    themeVariables: {
      // General
      background: "#1a1a2e",
      primaryColor: "#4a6fa5",
      primaryTextColor: "#ffffff",
      primaryBorderColor: "#6a8fc5",
      secondaryColor: "#4a8a6a",
      secondaryTextColor: "#ffffff",
      secondaryBorderColor: "#6aaa8a",
      tertiaryColor: "#6a5a8a",
      tertiaryTextColor: "#ffffff",
      tertiaryBorderColor: "#8a7aaa",
      lineColor: "#888888",
      textColor: "#ffffff",

      // Mindmap specific - ensure all node levels have white text
      nodeBkg: "#4a6fa5",
      nodeTextColor: "#ffffff",

      // Flowchart
      mainBkg: "#4a6fa5",
      nodeBorder: "#6a8fc5",
      clusterBkg: "#2a2a4a",
      titleColor: "#ffffff",
      edgeLabelBackground: "transparent",
    },
    flowchart: {
      useMaxWidth: true,
      htmlLabels: true,
    },
  });

  // Find all mermaid code blocks and render them
    document.addEventListener("DOMContentLoaded", function () {
      const codeBlocks = document.querySelectorAll("pre code.language-mermaid");

    codeBlocks.forEach((codeBlock, index) => {
      const pre = codeBlock.parentElement;
      const mermaidCode = codeBlock.textContent;

      // Create a new div for the mermaid diagram
      const mermaidDiv = document.createElement("div");
      mermaidDiv.className = "mermaid";
      mermaidDiv.textContent = mermaidCode;

      // Replace the pre element with the mermaid div
      pre.parentNode.replaceChild(mermaidDiv, pre);
    });

    // Render all mermaid diagrams
    mermaid.run();
  });
</script>
