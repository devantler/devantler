<script type="module">
    import mermaid from "https://cdn.jsdelivr.net/npm/mermaid@11/dist/mermaid.esm.min.mjs";

  mermaid.initialize({
    startOnLoad: false,
    theme: "dark",
    securityLevel: "loose",
    flowchart: {
      useMaxWidth: true,
      htmlLabels: true,
    },
  });

  // Find all mermaid code blocks and render them
    document.addEventListener("DOMContentLoaded", function () {
      const codeBlocks = document.querySelectorAll("pre code.language-mermaid");

    codeBlocks.forEach((codeBlock, index) => {
      const pre = codeBlock.parentElement;
      const mermaidCode = codeBlock.textContent;

      // Create a new div for the mermaid diagram
      const mermaidDiv = document.createElement("div");
      mermaidDiv.className = "mermaid";
      mermaidDiv.textContent = mermaidCode;

      // Replace the pre element with the mermaid div
      pre.parentNode.replaceChild(mermaidDiv, pre);
    });

    // Render all mermaid diagrams
    mermaid.run();
  });
</script>
